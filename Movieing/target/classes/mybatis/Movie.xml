<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mybatis.Movie">

	<!-- 영화 넘버 가져오기 -->
	<select id="selectMovieNo" parameterType="java.util.Map" resultType="String">
		select MOVIE_NO from movie
		where MOVIE_TITLE  =#{movieTitle}
	</select>
	
	<!-- 영화 리스트 가져오기 -->
	<select id="selectListMovie" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
	</select>
	
	<!-- 영화 한개 DTO 가져오기 -->
	<select id="selectOneMovie" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_TITLE = #{movieTitle}
	</select>
	<!-- 특정 영화 DTO 가져오기 -->
	<select id="selectOne" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_NO = #{movieNo}
	</select>
	
	<!-- 공포 영화 가져오기 -->
	<select id="selectListHorror" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_GENRE = '공포'
		order by dbms_random.value
	</select>
	<!-- 로맨스 영화 가져오기 -->
	<select id="selectListRomance" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_GENRE = '멜로/로맨스'
		order by dbms_random.value
	</select>
	<!-- 코디미 영화 가져오기 -->
	<select id="selectListComedy" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_GENRE = '코미디'
		order by dbms_random.value
	</select>
	<!-- 무빙인기영화 랜덤 가져오기 -->
	<select id="selectListRandom" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie 
		order by dbms_random.value
	</select>
	
	<select id="selectListNewRandom" parameterType="java.util.Map" resultType="MovieDto">
		<![CDATA[
		select * from movie
		where MOVIE_YEAR = 2019
		order by dbms_random.value
		
		
		]]>
	</select>
	<select id="selectListARandom" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
	</select>
	<!-- 영화감독 출현작 -->
	<select id="selectListDirector" parameterType="java.util.Map" resultType="MovieDto">
	select movie_title from movie where movie_director=#{movieDirector}
	</select>
	
	<select id="selectListSearchRadom" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_COUNTRY = #{searchWord} 
		OR MOVIE_TITLE LIKE #{%searchWord}
		OR MOVIE_TITLE LIKE #{searchWord%}
		OR MOVIE_TITLE LIKE #{%searchWord%}
	</select>
	
	<!-- 전체영화 드라마 가져오기 -->
	<select id="selectListDrama" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_GENRE = '드라마'
		order by dbms_random.value
	</select>
	
	<!-- 전체영화 애니메이션 가져오기 -->
	<select id="selectListAni" parameterType="java.util.Map" resultType="MovieDto">
		select * from movie
		where MOVIE_GENRE = '애니메이션'
		order by dbms_random.value
	</select>
	
</mapper>